<!doctype html>
<html><body>
<script src='../threex.dommirror.js'></script>
<style>
#srcElement, #dstElement {
	width: 45%;
	display: inline-block;
}
</style>
<div id='srcElement'></div>
<div id='dstElement'></div>
<script>
	// create an observer instance
	var mutationObserver = new MutationObserver(function(mutations) {
		mutations.forEach(function(mutation) {
			console.log(mutation.type, mutation);
			Array.prototype.slice.call(mutation.addedNodes).forEach(function(node){
				console.log('added', node)
				console.dir(node.parentElement)
				var rootElement = document.querySelector('#srcElement');
				var cssSelector = extractCssSelector(rootElement, node)
			})
			
			function onAdded(){
				
			}
			function extractCssSelector(rootElement, childElement){
				
			}
		});
	});
	
	
	var srcElement = document.querySelector('#srcElement');
	mutationObserver.observe(srcElement, {
		attributes: true,
		childList: true,
		characterData: true
	})
	
	
	////////////////////////////////////////////////////////////////////////
	//
	////////////////////////////////////////////////////////////////////////
	
	function addChange(){
		// var domElement = document.querySelector("#srcElement");
		// while (domElement.firstChild) {
		// 	domElement.removeChild(domElement.firstChild);
		// }

		var newElement = document.createElement('div')
		newElement.innerHTML = 'new content at ' + (new Date())

		var srcElement = document.querySelector('#srcElement')
		srcElement.appendChild(newElement)	
	}
</script>	
</body></html>
